@using PagedList.Mvc;
@using PagedList;
@model IPagedList<NotesMarketPlace.Models.User>

@{
    ViewBag.Title = "Members";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    <link href="~/Content/custom/members.css" rel="stylesheet" />
}

<div id="members-page">
    <section id="members">
        <div class="content-box-md">
            <div class="container">
                <div class="row">
                    <div class="col-md-4"><h3>Members</h3></div>
                    <div class="col-md-8">
                        <form class="form-inline">

                            <div class="form-group has-search">
                                <span class="fa fa-search form-control-feedback"></span>
                                <input class="form-control" type="text" placeholder="Search notes here.." aria-label="Search">
                            </div>

                            <div class="form-group">
                                <button type="submit" class="btn btn-outline-secondary">Search</button>

                            </div>
                        </form>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">SR NO.</th>
                                <th scope="col">FIRST NAME</th>
                                <th scope="col">LAST NAME</th>
                                <th scope="col">EMAIL</th>
                                <th scope="col">JOINING DATE</th>
                                <th scope="col">UNDER REVIEW NOTES</th>
                                <th scope="col">PUBLISHED NOTES</th>
                                <th scope="col">DOWNLOADED NOTES</th>
                                <th scope="col">TOTAL EXPENSES</th>
                                <th scope="col">TOTAL EARNINGS</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        @foreach (var item in Model)
                        {
                            <tr>

                                <td>2</td>
                                <td>@item.FirstName</td>
                                <td>@item.LastName</td>
                                <td>@item.EmailID</td>
                                <td>@item.CreatedDate</td>
                                <td><a href="@Url.Action("NotesUnderReview",new { dropdownsearch=item.FullName})">@item.Notes.Where(model => model.Status == 5).Count()</a></td>
                                <td><a href="#">@item.Downloads.Where(model => model.Seller == item.ID && model.IsAttachmentDownloaded == true).Count()</a></td>
                                <td><a href="#">@item.Notes.Where(model => model.Status == 4).Count()</a></td>
                                <td><a href="#">$@item.Notes.Where(model => model.Status == 4).Count()</a></td>
                                <td>$@item.Notes.Where(model => model.Status == 4).Count()</td>
                                <td>
                                    <span class="dropdown">
                                        <a href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="@Url.Action()">View More Details</a>
                                            <a class="dropdown-item deactivate-btn" href="#" role="button">Deactivate</a>

                                        </div>
                                    </span>
                                </td>
                            </tr>
                        }




                    </table>
                    @Html.PagedListPager(Model, page => Url.Action("Members", new { searchstring = Request.QueryString["searchstring"], sortby = Request.QueryString["sortby"], page }),
              new PagedListRenderOptions() { Display = PagedListDisplayMode.IfNeeded, DisplayPageCountAndCurrentLocation = false, ClassToApplyToFirstListItemInPager = null, ClassToApplyToLastListItemInPager = null })
                </div>
            </div>
        </div>

    </section>
</div>